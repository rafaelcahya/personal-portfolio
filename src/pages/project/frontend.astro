---
import FloatingBar from "../../components/common/FloatingBar.astro";
import Layout from "../../layouts/Layout.astro";
import { getEntries } from "../../lib/contentful";

const projects = await getEntries("frontend");

const sortedProjects = [...(projects || [])]
    .filter((p) => !!p?.fields?.date)
    .sort((a, b) => {
        const aDate = new Date(String(a.fields.date)).getTime();
        const bDate = new Date(String(b.fields.date)).getTime();
        return bDate - aDate;
    });
---

<Layout>
    <FloatingBar />
    <div
        data-aos="fade"
        class="flex flex-col gap-10 md:gap-20 py-44 pb-56 px-5 sm:px-10 lg:px-20 2xl:px-40 mx-auto w-full max-w-[90rem]"
    >
        <header
            data-aos="fade-up"
            data-aos-duration="400"
            class="flex flex-col gap-2 w-full md:w-[900px] mx-auto"
        >
            <p
                class="text-zinc-500 text-[1rem] sm:text-[1.2rem] tracking-[0.015rem]"
            >
                My Projects
            </p>
            <h1
                class="text-zinc-900 text-[2rem] sm:text-[2.5rem] md:text-[4rem] leading-[2.5rem] sm:leading-[3rem] md:leading-[4.5rem]"
            >
                Turning concepts into sleek,{" "}
                <span
                    class="text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-purple-400 tracking-[0.015rem]"
                >
                    functional web designs
                </span>
            </h1>
        </header>
        <section class="flex flex-wrap gap-20 justify-center">
            {
                sortedProjects.map((article: any, index: number) => (
                    <a
                        data-aos="fade-up"
                        data-aos-duration="400"
                        data-aos-offset="0"
                        data-aos-delay={index * 100}
                        href={`frontend/${article.fields.slug}`}
                    >
                        {article.fields.thumbnailImage && (
                            <div class="group flex flex-col gap-3 w-full sm:w-[500px] h-full">
                                <div class="flex-1 flex flex-col gap-1">
                                    <p class="font-medium text-[1.2rem] sm:text-[1.4rem] text-zinc-900 group-hover:text-orange-500 duration-200">
                                        {article.fields.title}
                                    </p>
                                    <p class="text-[1rem] text-zinc-500 line-clamp-3 w-full">
                                        {article.fields.outline}
                                    </p>
                                </div>
                                <div class="flex-1 p-3 bg-white/50  backdrop-blur-[25px] border-[1.5px] shadow-[0_4px_30px_rgba(0,0,0,0.1)] border-white/50 rounded-2xl duration-200">
                                    <img
                                        src={
                                            "https:" +
                                            article.fields.thumbnailImage.fields
                                                .file.url
                                        }
                                        alt={
                                            article.fields.thumbnailImage.fields
                                                .title
                                        }
                                        class="lazyload rounded-xl"
                                        loading="lazy"
                                        decoding="async"
                                    />
                                </div>
                            </div>
                        )}
                    </a>
                ))
            }
        </section>
    </div>
</Layout>
